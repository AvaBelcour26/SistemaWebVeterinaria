<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:lang="${#locale.language}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar menu</title>
</head>
<body th:fragment="sidebar" id="body">
<div class="l-navbar" id="navbar">
    <nav class="nav">
        <div>
            <a href="#" class="nav__logo">
                <img th:src="@{/assets/logo/icono-logo.svg}" alt="" class="nav__logo-icon">
                <span class="nav__logo-text">VetPlanet</span>
            </a>

            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bx-chevron-right'></i>
            </div>

            <ul class="nav__list">
                <a href="#" class="nav__link">
                    <i class='bx bx-bell nav__icon' ></i>
                    <span class="nav__text" th:text="#{sidebar.notification}">Notificaciones</span>
                </a>
                <a href="#" class="nav__link">
                    <i class='bx bx-heart nav__icon'></i>
                    <span class="nav__text" th:text="#{sidebar.favorites}">Favoritos</span>
                </a>
                <a href="#" class="nav__link">
                    <i class='bx bx-bookmark nav__icon'></i>
                    <span class="nav__text" th:text="#{sidebar.saved}">Guardados</span>
                </a>

                <!-- Dropdown para idiomas -->
                <div class="dropdown-language">
                    <a href="#" class="nav__link dropdown-toggle" id="languageDropdown">
                        <i class='bx bx-globe nav__icon'></i>
                        <span class="nav__text" th:text="#{sidebar.language}">Idioma</span>
                        <i class='bx bx-chevron-down nav__icon dropdown-icon'></i>
                    </a>
                    <div class="dropdown-menu" id="languageMenu">
                        <a th:href="@{'?lang=es'}" class="dropdown-item">
                            <span th:text="#{language.spanish}">Español</span>
                        </a>
                        <a th:href="@{'?lang=en'}" class="dropdown-item">
                            <span th:text="#{language.english}">English</span>
                        </a>
                        <a th:href="@{'?lang=it'}" class="dropdown-item">
                            <span th:text="#{language.italian}">Italiano</span>
                        </a>
                    </div>
                </div>
            </ul>
        </div>
        <div class="nav__link" style="cursor: pointer;">
            <form th:action="@{/logout}" method="post" style="display: inline;">
                <button type="submit" style="background: none; border: none; color: inherit; padding: 0; font: inherit; cursor: pointer; display: flex; align-items: center; width: 100%;">
                    <i class='bx bx-log-out-circle nav__icon'></i>
                    <span class="nav__text" th:text="#{sidebar.logout}">Cerrar Sesión</span>
                </button>
            </form>
        </div>
    </nav>
</div>

<!-- JavaScript para el dropdown de idiomas -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const languageDropdown = document.getElementById('languageDropdown');
        const languageMenu = document.getElementById('languageMenu');

        if (languageDropdown && languageMenu) {
            languageDropdown.addEventListener('click', function(e) {
                e.preventDefault();
                languageMenu.classList.toggle('show-dropdown');
                this.querySelector('.dropdown-icon').classList.toggle('rotate');
            });

            // Cerrar el menú cuando se hace clic fuera
            document.addEventListener('click', function(e) {
                if (!languageDropdown.contains(e.target) && !languageMenu.contains(e.target)) {
                    languageMenu.classList.remove('show-dropdown');
                    languageDropdown.querySelector('.dropdown-icon').classList.remove('rotate');
                }
            });
        }
    });
</script>
</body>
</html>